platformName: KakaoPage
domain: WEBNOVEL
schemaVersion: 3

fieldMappings:
  # === Contents (마스터 공통) ===
  title: master_title
  imageUrl: poster_image_url
  synopsis: synopsis
  author: domain.author
  publisher: domain.publisher
  ageRating: domain.age_rating
  genres: domain.genres

  # === Platform_Data ===
  productUrl: platform.url
  seriesId: platform.platform_specific_id

  # === Platform_Data.attributes(JSONB) ===

  status: platform.attributes.status
  keywords: platform.attributes.keywords
  rating: platform.attributes.rating
  viewCount: platform.attributes.view_count
  commentCount: platform.attributes.comment_count

domainObjectMappings:
  author:
    targetField: author
    type: string
  publisher:
    targetField: publisher
    type: string
  age_rating:
    targetField: ageRating
    type: string
  genres:
    targetField: genres
    type: list

normalizers:
  - type: strip_parentheses
    fields: [master_title]
  - type: collapse_spaces
    fields: [master_title]
  - type: nfkc
    fields: [master_title, platform.attributes.author, platform.attributes.publisher]